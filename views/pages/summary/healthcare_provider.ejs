<!DOCTYPE html>
<html>

<head>
    <% include ../../partials/common/load-scripts %>
</head>

<body>
    <% include ../../partials/common/header %>
    <% include ../../partials/common/left-pane %>

    <div id="app-right-pane-container">

        <div class="pg-section container-fluid mt-3" id="summary-container">

            <div class="row">

                <!-- row1 / col 1 -->
                <div class="col-sm-12 col-md-12 col-lg-6 col-xl-6">

                    <!-- PROVIDER DEMOGRAPHICS SECTION  -->
                    <div id="account-row1-col1-1">

                        <!-- profile information tile -->
                        <div class="tile white-tile mb-2">

                            <div class="mb-2">

                                <div class="text-center">
                                    <div class="mx-auto position-relative text-center"
                                        style="width:150px;height: 150px;">
                                        <% if('personal_profile_image' in user_info && user_info.personal_profile_image.length>0){ %>
                                        <img src="<%=user_info.personal_profile_image[0].location%>"
                                            class="rounded-circle" alt="[PROFILE PIC NOT FOUND. TRY UPLOADING AGAIN]"
                                            style="width: 100%;height: 100%;">
                                        <% } else { %>
                                        <img src="/efs/core/images/noimage-icon-x225.png" class="rounded-circle"
                                            alt="[PROFILE PIC NOT FOUND. TRY UPLOADING AGAIN]" style="max-width: 100%;">
                                        <% } %>
                                        <div class="upload-img-container" style="top: 45%;right:-10px;">
                                            <input type="file" name="personal_profile_image"
                                                id="update-profile-img-input" class="entry-field" title="upload image">
                                            <div class="input-overlay">
                                                <i class="material-icons">camera_alt</i>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="mt-2 text-center">
                                    <h3 class="text-capitalize">Welcome,
                                        <%=user_info.first_name+" "+user_info.last_name %></h3>
                                </div>

                            </div>

                            <div class="mt-2 p-2 border-bottom position-relative">
                                <div class="align-top pull-left">
                                    <i class="material-icons align-middle">email</i>
                                </div>
                                <div class="d-inline-block text-lower ml-5">
                                    <div><%=user_info.email_id %></div>
                                    <div class="text-muted small">Email</div>
                                </div>
                                <div class="push-right pointer p-1 edit-item-button" edititem="email_id">
                                    <i class="material-icons align-middle small-icon">edit</i>
                                </div>
                            </div>

                            <div class="mt-2 p-2 border-bottom position-relative">
                                <div class="align-top pull-left">
                                    <i class="material-icons align-middle">call</i>
                                </div>
                                <div class="d-inline-block text-lower ml-5">
                                    <div><%=user_info.country_dial_code+" "+user_info.personal_primary_number %></div>
                                    <div class="text-muted small">Phone</div>
                                </div>
                                <div class="push-right pointer p-1 edit-item-button" edititem="personal_primary_number">
                                    <i class="material-icons align-middle small-icon">edit</i>
                                </div>
                            </div>

                            <div class="mt-2 p-2 border-bottom position-relative">
                                <div class="align-top pull-left">
                                    <i class="material-icons align-middle">home</i>
                                </div>
                                <div class="d-inline-block text-lower ml-5 w-90">
                                    <% if ('personal_address_street_address_1' in user_info && user_info.personal_address_street_address_1.length>0) { %>
                                    <span><%=user_info.personal_address_street_address_1 %>,</span>
                                    <span><%=user_info.personal_address_street_address_2 %></span>
                                    <span><%=user_info.personal_address_city %>,
                                        <%=user_info.personal_address_state %>,
                                        <%=user_info.personal_address_zip_code %>, </span>
                                    <span><%=user_info.personal_address_country.name%></span>
                                    <% } else { %>
                                    <div>Unknown</div>
                                    <% } %>
                                    <div class="text-muted small">Address</div>
                                </div>
                                <div class="push-right pointer p-1 edit-item-button" edititem="personal_address">
                                    <i class="material-icons align-middle small-icon">edit</i>
                                </div>
                            </div>


                            <div class="mt-2 p-2 border-bottom position-relative">
                                <div class="align-top pull-left">
                                    <i class="material-icons align-middle">local_library</i>
                                </div>
                                <div class="d-inline-block text-lower ml-5">
                                    <div class="text-capitalize"><%=user_info.specialty.name %></div>
                                    <div class="text-muted small">Specialty</div>
                                </div>
                                <div class="push-right pointer p-1 edit-item-button" edititem="specialty">
                                    <i class="material-icons align-middle small-icon">edit</i>
                                </div>
                            </div>

                        </div>

                    </div>

                    <!-- QUALIFICATION SECTION  -->
                    <div class="tile white-tile mt-3 mb-2 p-3 position-relative" id="provider-qualification-container">
                        <!-- check if medical registration exists -->
                        <% if ('medical_registration_number' in user_info)  { %>
                        <h4>Qualification</h4>
                        <!-- MEDICAL DEGREE -->
                        <% if("medical_degree" in user_info && user_info.medical_degree.length>0) {%>
                        <div class="mt-2 p-2 border-bottom position-relative">
                            <div class="align-top pull-left">
                                <i class="material-icons align-middle">school</i>
                            </div>
                            <div class="d-inline-block text-lower ml-5 w-90">
                                <div>
                                    <div><%- user_info.medical_degree.map(d=>{return d.name}).join(', ') %></div>
                                    <div class="text-muted small">Medical Degree</div>
                                </div>

                                <div class="mt-3">
                                    <div><%- "medical_degree_year_of_completion" in user_info && user_info.medical_degree_year_of_completion.length>0? user_info.medical_degree_year_of_completion:"Unknown"; %></div>
                                    <div class="text-muted small">Year of completion</div>
                                </div>

                                <div class="mt-3">
                                    <div><%- "medical_years_of_experience" in user_info && user_info.medical_years_of_experience.length>0? user_info.medical_years_of_experience+" Years":"Unknown"; %></div>
                                    <div class="text-muted small">Years of experience</div>
                                </div>
                                
                            </div>
                            <div class="push-right pointer p-1 edit-item-button" edititem="medical_degree">
                                <i class="material-icons align-middle small-icon">edit</i>
                            </div>
                        </div>
                        <% } %>

                        <% if("medical_registration_number" in user_info && user_info.medical_registration_number.length>0) {%>
                        <div class="mt-2 p-2 border-bottom position-relative">
                            <div class="align-top pull-left">
                                <i class="material-icons align-middle">contacts</i>
                            </div>
                            <div class="d-inline-block text-lower ml-5">
                                <div>
                                    <div><%= user_info.medical_registration_number %></div>
                                    <div class="text-muted small">Medical Registration/License Number</div>
                                </div>
                                <div class="mt-2">
                                    <div><%= user_info.medical_registration_year %></div>
                                    <div class="text-muted small">Year of Medical Registration</div>
                                </div>
                            </div>
                            <div class="push-right pointer p-1 edit-item-button" edititem="medical_registration_number">
                                <i class="material-icons align-middle small-icon">edit</i>
                            </div>
                        </div>
                        <% } %>

                        <% if("medical_registration_council" in user_info && user_info.medical_registration_council.length>0) {%>
                        <div class="mt-2 p-2 border-bottom position-relative">
                            <div class="align-top pull-left">
                                <i class="material-icons align-middle">business</i>
                            </div>
                            <div class="d-inline-block text-lower ml-5 w-90">
                                <div><%- user_info.medical_registration_council.map(m=>{ return m.name; }).join(', ') %>
                                </div>
                                <div class="text-muted small">Medical council</div>
                            </div>
                            <div class="push-right pointer p-1 edit-item-button"
                                edititem="medical_registration_council">
                                <i class="material-icons align-middle small-icon">edit</i>
                            </div>
                        </div>
                        <% } %>

                        <div class="mt-2 p-2 border-bottom position-relative">
                            <div class="align-top pull-left">
                                <i class="material-icons align-middle">voicemail</i>
                            </div>
                            <div class="d-inline-block text-lower ml-5 w-90">
                                <div>
                                    <% if("known_languages" in user_info && user_info.known_languages.length>0) { %>
                                    <%- user_info.known_languages.map(m=>{ return m.name; }).join(', '); %>
                                    <% } else{ %>
                                    <span>Unknown</span>
                                    <% } %>
                                </div>
                                <div class="text-muted small">Known Languages</div>
                            </div>
                            <div class="push-right pointer p-1 edit-item-button" edititem="known_languages">
                                <i class="material-icons align-middle small-icon">edit</i>
                            </div>
                        </div>

                        <!-- IF NO MEDICAL REGISTRATION -->
                        <% } else { %>
                        <div id="provider-qualification-entry-container">
                            <div class="position-absolute">
                                <i class="material-icons align-middle"
                                    style="font-size:3em;color:red;">assignment_ind</i>
                            </div>
                            <div style="margin-left: 4em;">
                                <b>Please provide medical qualification information</b>
                                <div class="text-muted small">Your practice or profile information wont be visible to
                                    others untill you have provided
                                    your qualification details, and your details have been reviewed by our compliance
                                    team.
                                    Please contact us if there are questions or concerns.</div>
                                <div class="mt-2">
                                    <div class="btn btn-primary add-provider-qualification-button"
                                        edititem="provider_qualification">
                                        <label class="m-0 pointer">Enter your qualification details</label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <% } %>

                    </div>

                </div>

                <!-- row1 / col 2 -->
                <div class="col-sm-12 col-md-12 col-lg-6 col-xl-6 mb-3">

                    <!-- MANAGE PRACTICE SECTION -->
                    <div class="tile white-tile mb-2 p-3 position-relative" id="practices-outer-container">
                        <div class="border-bottom-2px">
                            <div class="align-top position-absolute">
                                <img src="/efs/core/images/facilities-icons/hospital.png" style="width:40px;">
                            </div>
                            <div style="margin-left:50px;" class="align-top">
                                <h4 class="d-inline-block m-0">Practices</h4>
                                <p class="text-muted mt-2"> Manage your practice address, availability and other
                                    information. Keep your practice information up to date and improve the
                                    inflow of patients.
                                </p>
                            </div>
                            <div class="push-right" >
                                <div class="btn btn-primary add-practice-button" edititem="practice">
                                    <label class="m-0 pointer">Add New Practice</label>
                                </div>
                            </div>
                        </div>
                        <div class="mt-3" id="practices-inner-container"></div>
                    </div>

                </div>

            </div>

        </div>


        <div class="pg-section container-fluid mt-3 d-none" id="editform-container"></div>

    </div>


    <link rel="stylesheet" type="text/css" href="/src/css/summary.css">
    <script type="module" src="/src/js/healthcare-provider-summary.js"></script>
    <script type="module" src="/src/js/manage-practices.js"></script>

</body>

</html>